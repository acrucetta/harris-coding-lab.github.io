---
title: "Coding Lab: Basic Syntax and Operators in R"
author: "Ari Anisfeld, Terrence Chau"
date: "08/1/2020"
output:
  ioslides_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```


## Lecture outline

 - Binary operators pt 1 + Variable assignment)
 - Types + Binary operators pt 2
 - Data structures (Vectors and tibbles)
 - detour: manipulating data with `baseR`

## Binary operators, pt 1

R is a calculator! We can do math with numbers, using the following symbols:
```{r, eval=FALSE}
4 + 4
4 - 4
4 * 4
4 / 4
4 ^ 4
```

<!-- highlight using the console to play --> 

## Variable assignment

We use `<-` for assigning variables in R. 
```{r}
my_number <- 4
my_number
```

What will the following expressions return?
```{r eval=FALSE}
my_number + 3
```

```{r eval=FALSE}
my_number * 3
```

***

```{r}
my_number + 3
```

```{r}
my_number * 3
```


## Variable assignment

We can re-assign a variable as we wish. This is useful if we want to try the same math with various different numbers.
```{r eval=FALSE}
my_number <- 2
my_output <- sqrt((12 * my_number) + 1) 
```

## Variable assignment, continued {.build}

```{r}
my_number <- 2
my_output <- sqrt((12 * my_number) + 1)
my_output
```


## Data types
R has several types which distinguish how R stores data internally. 

- Some of the most common ones (in increasing complexity):
  - logical, numeric, character

```{r}
# logical, also known as booleans
type_logical <- FALSE
type_logical <- TRUE

# integer and double, together are called: numeric
type_integer <- 1L
type_double <- 1.0

type_character <- "abbreviated as chr, also known as a string"
```

## Type issues {.build}

Sometimes you'll run into problems because the data is not of the type you expect. 

- For example, you may import data where something that look likes a number is a string.
```{r}
a <- "1"
b <- 2 
```

What will happen when we try to run the following code?

```{r eval=FALSE}
a + b
```

`Error in a + b : non-numeric argument to binary operator`

***
To avoid errors, we can check for the type of the data we have with `typeof()`:

```{r}
typeof(a)
typeof(b)
```


## Type coercion 
The error we got when we tried `a + b` was because `a` is a character. We can reassign types on the fly:
```{r}
as.integer(a) + 3
as.numeric(a) + 3
```

***
Some type coercion is done by R automatically:
```{r}
paste0(a, as.character(b))
paste0(a, b)
```

***
Logicals are coercible to numeric or character.

What do you think the following code will return?
```{r, eval=FALSE}
TRUE + 4
FALSE + 4
paste0(FALSE, "?")
```

*** 
```{r, eval=TRUE}
TRUE + 4
FALSE + 4
paste0(FALSE, "?")
```

## Type coercion

Some data cannot be coerced.

```{r eval=FALSE}
as.numeric("d4")
```

```
[1] NA
Warning message:
NAs introduced by coercion
```

<!-- # R reassigns types on the fly if the expected type is less restrictive -->
<!-- # log < int < dbl < chr -->
<!-- # ex. paste(a, b) -->
<!-- # Possible exercise ... type coercion ...  -->
<!-- # as.numeric("d4") returns NA with warning NAs introduced by coercion  -->

## Binary operators pt. 2 

We can also compare things. 
```{r}
4 < 4
4 >= 4
4 == 4
4 != 4
```

## Operators...applied to strings?

What do you think is being compared in this case?
```{r}
"four" == "four"
```

```{r}
"four" == 4
```

## Exercise: comparing a string and a number {.build}

What do you think will happen when you run the following code?

```{r}
"4" == 4
```

## Data structures
Usually we want to keep track of more than one thing at time, say a list of numbers. Computer scientists refer to these as data structures. The main workhorse data structure in R is the vector.
```{r}
my_numbers <- c(1, 2, 3, 4, 5, 6)

my_numbers
```

## Creating vectors
There are some nice shortcuts for creating vectors.

You can Google "create a vector in R that has the same letter repeated" for some ideas.
```{r}
c("a", "a", "a", "a")
rep("a", 4)
```

*** 
There are also several ways to create vectors of sequential numbers:
```{r}
c(2, 3, 4, 5)
2:5
seq(2, 5)
```

## Adding to vectors

We can do math with vectors!

```{r}
my_numbers + my_numbers # this adds the vectors item by item
my_numbers + 6 # this adds 6 to each object 
```

***

How would the judges rank this lesson right now?
```{r}
my_numbers / c(.1, .2, .3, .4, .5, .6)
```

*** 

Why does vector `a` come out this way? Remember, `my_numbers` is a list of numbers from 1 to 6.
```{r}
a <- my_numbers + c(1, 2)
```

```{r}
a 
```

## Using functions with vectors

Some functions act directly on a vector in a pleasing way:
```{r}
sum(a)
length(a)
```

## Example: Using vectors to calculate a sum of fractions {.exercise}

Use R to calculate the sum 

$$\sum_{n=0}^{10} \frac{1}{2^n}$$

How would you translate this into code?

## Example:  Using vectors to calculate a sum of fractions 

We go from math notation $$\sum_{n=0}^{10} \frac{1}{2^n}$$ to R code:

```{r warning=FALSE}
numerator <- rep(1, 11)
denominator <- 2 ^ c(0:10)

sum(numerator/denominator)

```

## What we learned

Today we discussed basic syntax and operators in R. You now know how to:

- Assign data to a variable for future reference.
- Distinguish between types 
- Work with atomic vectors, the basic data structure of R
