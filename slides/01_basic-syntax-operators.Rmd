---
title: "Coding Lab: Basic Syntax and Operators in R"
author: "Ari Anisfeld, Angela Li"
date: "10/1/2019"
output:
  ioslides_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```


## Agenda
1. Coding lab overview
1. Lecture
1. Workshop

## Why are we here? 
The purpose of this Coding Lab is to:

1. introduce you to basic programming concepts
1. prepare you to do data analysis in R for the future (additional courses, your next job)
1. give you the coding skills necessary to complete your Stats I homework

<div class="notes">
R is a full functional programming language and can do many things.
Our focus is on data analysis and running simulations for stats.
</div>

## What will we cover?

1. Learn basic syntax and operators
1. Reading files, data frames and calculations
1. If statements
1. Loops
1. Functions

[https://harris-coding-lab.github.io/]()



## Survey time {.build}
<!--delta-->
- How many people have R and RStudio installed on their computers?
<!-- - How many people know how to install packages and load libraries in R?-->
- How many people have experience with a programming language of any type?

## Some tips for computational reasoning {.build}
- Be hands-on: make small tweaks to the code to see if you understand how it works.
<!--We will do things that produce errors and then talk about how to read the error and fix it.
-->
- Be resourceful: usually someone else has had your problem and developed a solution.
<!--example length built-in-->
- Find help: Check the documentation with `?`

Additional resources are listed on the course website.


## Finding help with `?`

```{r, eval=FALSE}
?sum
```

- Description

`sum returns the sum of all the values present in its arguments.`

- Usage 

`sum(..., na.rm = FALSE)`

- Arguments

`...	numeric or complex or logical vectors.`

- Examples (scroll down!)

`sum(1, 2, 3, 4, 5)`

<div class="notes">
Do in R if easy enough. Highlight that while it's complicated if they
understand the structure of help docs they can get far.
</div>

## Lecture outline

 - Operators pt 1
 - Variable assignment
 - Types
 - Operators pt 2
 - Data structures (Vectors)

## Operators, pt 1

R is a calculator! We can do math with numbers, using the following symbols:
```{r, eval=FALSE}
4 + 4
4 - 4
4 * 4
4 / 4
4 ^ 4
```



## Variable assignment

We use `<-` for assigning variables in R. 
```{r}
my_number <- 4
my_number
```

What will the following expressions return?
```{r eval=FALSE}
my_number + 3
```

```{r eval=FALSE}
my_number * 3
```

***

```{r}
my_number + 3
```

```{r}
my_number * 3
```


## Variable assignment

We can re-assign a variable as we wish.
 - useful if we want to tray the same math with various different numbers
```{r eval=FALSE}
my_number <- 2
my_output <- sqrt((12 * my_number) + 1) 
```

## Variable assignment, continued {.build}

```{r}
my_number <- 2
my_output <- sqrt((12 * my_number) + 1)
my_output
```


## Data types
R has several types which distinguish how R stores data internally. 

- Some of the most common ones (in increasing complexity):
  - logical, numeric, character

```{r}
# logical, also known as booleans
type_logical <- FALSE
type_logical <- TRUE

# integer and double, together are called: numeric
type_integer <- 1L
type_double <- 1.0

type_character <- "abbreviated as chr, also known as a string"
```

## Type issues {.build}

Sometimes you'll run into problems because the data is not of the type you expect. 

- For example, you may import data where something that look likes a number is a string.
```{r}
a <- "1"
b <- 2 
```

What will happen when we try to run the following code?

```{r eval=FALSE}
a + b
```

`Error in a + b : non-numeric argument to binary operator`


***
To avoid errors, we can check for the type of the data we have with `typeof()`:

```{r}
typeof(a)
typeof(b)
```


## Type coercion 
The error we got when we tried `a + b` was because `a` is a character. We can reassign types on the fly:
```{r}
as.integer(a) + 3
as.numeric(a) + 3
```

***
Some type coercion is done by R automatically:
```{r}
paste0(a, as.character(b))
paste0(a, b)
```

***
Logicals are coercible to numeric or character.

What do you think the following code will return?
```{r, eval=FALSE}
TRUE + 4
FALSE + 4
paste0(FALSE, "?")
```

*** 
```{r, eval=TRUE}
TRUE + 4
FALSE + 4
paste0(FALSE, "?")
```

## Type coercion

Some data cannot be coerced.

```{r eval=FALSE}
as.numeric("d4")
```
```[1] NA
Warning message:
NAs introduced by coercion
```

<!-- # R reassigns types on the fly if the expected type is less restrictive -->
<!-- # log < int < dbl < chr -->
<!-- # ex. paste(a, b) -->
<!-- # Possible exercise ... type coercion ...  -->
<!-- # as.numeric("d4") returns NA with warning NAs introduced by coercion  -->

## Operators pt. 2 

We can also compare things. 
```{r}
4 < 4
4 >= 4
4 == 4
4 != 4
```

## Operators...applied to strings?

What do you think is being compared in this case?
```{r}
"four" == "four"
```

```{r}
"four" == 4
```

## Exercise: comparing a string and a number {.build}

What do you think will happen when you run the following code?

```{r}
"4" == 4
```

## Data structures
Usually we want to keep track of more than one thing at time, say a list of numbers. Computer scientists refer to these as data structures. The main workhorse data structure in R is the vector.
```{r}
my_numbers <- c(1, 2, 3, 4, 5, 6)

my_numbers
```

## Creating vectors
There are some nice shortcuts for creating vectors.

You can Google "create a vector in R that has the same letter repeated" for some ideas.
```{r}
c("a", "a", "a", "a")
rep("a", 4)
```

*** 
There are also several ways to create vectors of sequential numbers:
```{r}
c(2, 3, 4, 5)
2:5
seq(2, 5)
```

## Adding to vectors

We can do math with vectors!

```{r}
my_numbers + my_numbers # this adds the vectors item by item
my_numbers + 6 # this adds 6 to each object 
```

***

How would the judges rank this lesson right now?
```{r}
my_numbers / c(.1, .2, .3, .4, .5, .6)
```

*** 

Why does vector `a` come out this way? Remember, `my_numbers` is a list of numbers from 1 to 6.
```{r}
a <- my_numbers + c(1, 2)
```

```{r}
a 
```

## Using functions with vectors

Some functions act directly on a vector in a pleasing way:
```{r}
sum(a)
length(a)
```

## Example: Using vectors to calculate a sum of fractions {.exercise}

Use R to calculate the sum 

$$\sum_{n=0}^{10} \frac{1}{2^n}$$

How would you translate this into code?

## Example:  Using vectors to calculate a sum of fractions 

We go from math notation $$\sum_{n=0}^{10} \frac{1}{2^n}$$ to R code:

```{r warning=FALSE}
numerator <- rep(1, 10)
denominator <- 2 ^ c(0:10)

sum(numerator/denominator)

```

## What we learned

Today we discussed basic syntax and operators in R. You now know how to:

- Assign data to a variable for future reference.
- Distinguish between types 
- Work with atomic vectors, the basic data structure of R

Up next week: data frames (aka, rectangular data)!

## How workshops work

- Work in a team of 2-4 on the tutorial, which can be found here:
  + [https://harris-coding-lab.shinyapps.io/basic-syntax/](https://harris-coding-lab.shinyapps.io/basic-syntax/]) 
  + (link available on course webpage as well)
  + Note, there are a few oddities in our system. 
    + variables are not "saved" from input box to input box
    + in the background, we have all the variables you need assigned according to our definitions.

- If you get stuck as a team, add your name to the help list:
  + [bit.ly/coding_lab_qa](bit.ly/coding_lab_qa)
